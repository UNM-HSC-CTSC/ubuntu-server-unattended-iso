# {{ ansible_managed }}
# GitHub Actions Runner Environment Configuration

# Runner configuration
RUNNER_NAME={{ runner_name | default('runner-%i') }}
RUNNER_WORK_DIRECTORY={{ runner_work_dir }}
RUNNER_ALLOW_RUNASROOT=0

# .NET configuration
DOTNET_SYSTEM_GLOBALIZATION_INVARIANT=1
DOTNET_RUNNING_IN_CONTAINER=0
DOTNET_USE_POLLING_FILE_WATCHER=1

# Git configuration
GIT_TERMINAL_PROMPT=0
{% if git_lfs_skip_smudge %}
GIT_LFS_SKIP_SMUDGE=1
{% endif %}

{% if proxy_enabled %}
# Proxy configuration
HTTP_PROXY={{ proxy_http }}
HTTPS_PROXY={{ proxy_https }}
NO_PROXY={{ proxy_no_proxy }}
http_proxy={{ proxy_http }}
https_proxy={{ proxy_https }}
no_proxy={{ proxy_no_proxy }}
{% endif %}

{% if docker_enabled %}
# Docker configuration
DOCKER_HOST=unix:///var/run/docker.sock
{% endif %}

# Tool cache
AGENT_TOOLSDIRECTORY={{ tools_cache_dir }}
RUNNER_TOOL_CACHE={{ tools_cache_dir }}

# Temporary directories
RUNNER_TEMP=/home/runner%i/work/_temp
TMPDIR=/home/runner%i/work/_temp

# Custom environment variables
{% for key, value in runner_env_vars.items() %}
{{ key }}={{ value }}
{% endfor %}